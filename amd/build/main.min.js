function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("block_enrol_student/main",["exports","core/ajax","core/templates","jquery","core/loadingicon","core/modal_factory","block_enrol_student/handlers","core/notification","core/str"],function(a,b,c,d,e,f,g,h,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.handleError=a.removeLoader=a.addLoader=a.loadUserPagination=a.loadUserModal=a.getEnrolmentBlockData=a.populateStrings=a.init=a._sortOrder=a._courseId=a._lang=a._page=a._perPageCount=void 0;b=l(b);c=l(c);d=l(d);e=l(e);f=l(f);g=l(g);h=l(h);i=k(i);function j(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;j=function(){return a};return a}function k(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=j();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function l(a){return a&&a.__esModule?a:{default:a}}var m=25;a._perPageCount=m;var n=0;a._page=n;var o=[];a._lang=o;var p=null;a._courseId=p;a._sortOrder="ASC";var q=function(b,c){a._courseId=p=b;a._perPageCount=m=c;r();s(0,v());(0,d.default)(".enrol-student-container").on("click","#user_id",function(a){return t(a)});(0,d.default)(".student-block-pagination").on("click","ul.pagination li>a",function(a){return u(a)})};a.init=q;var r=function(){i.get_strings([{key:"error_title",component:"block_enrol_student"},{key:"block_enrol_student_load_error",component:"block_enrol_student"}]).then(function(b){a._lang=o=b})};a.populateStrings=r;var s=function(a,e){b.default.call([{methodname:"block_enrol_student_enrol_student_data",args:{courseid:p,perpage:m,page:a,sortdir:"ASC"},done:function done(a){if(0<a.data.length){c.default.renderForPromise("block_enrol_student/table/users",{users:a.data}).then(function(b){var f=b.html,g=b.js;c.default.replaceNodeContents(".enrol-student-container>tbody",f,g);if(""!==a.pagination){(0,d.default)(".student-block-pagination").html(a.pagination)}else{(0,d.default)("student-block-pagination").html("")}w(e)}).catch(function(){return x(e,o[1])})}else{w(e)}},fail:function fail(){x(e,o[1])}}])};a.getEnrolmentBlockData=s;var t=function(a){a.preventDefault();var b=(0,d.default)(a.target).is("a")?(0,d.default)("#user_id").data("id"):(0,d.default)(a.target).closest("a").data("id"),c=(0,d.default)(a.target).is("a")?(0,d.default)("#user_id").data("firstname"):(0,d.default)(a.target).closest("a").data("firstname"),e=(0,d.default)(a.target).is("a")?(0,d.default)("#user_id").data("lastname"):(0,d.default)(a.target).closest("a").data("lastname"),g=(0,d.default)(a.target).is("a")?(0,d.default)("#user_id").data("fullname"):(0,d.default)(a.target).closest("a").data("fullname");f.default.create({title:"Student Information",body:"       <table>\n            <tr>\n                <th>ID</th>\n                <th>FIRST NAME</th>\n                <th>LAST NAME</th>\n                <th>FULL NAME</th>\n            </tr>\n            <tbody>\n\n            <tr>\n                <td>"+b+"</td>\n                <td>"+c+"</td>\n                <td>"+e+"</td>\n                <td>"+g+"</td>\n\n            </tr>\n\n            </tbody>\n        </table>"}).done(function(a){a.show()})};a.loadUserModal=t;var u=function(b){b.preventDefault();var c=(0,d.default)(b.target).is("a")?(0,d.default)(b.target).attr("href"):(0,d.default)(b.target).closest("a").attr("href");a._page=n=g.default.getParameterByName("page",c);s(n,v())};a.loadUserPagination=u;var v=function(){(0,d.default)(".enrol-student-container").addClass("loading");return e.default.addIconToContainerWithPromise((0,d.default)(".enrol-student-container"))};a.addLoader=v;var w=function(a){(0,d.default)(".loading-icon").remove();a.resolve();(0,d.default)(".enrol-student-container").removeClass("loading")};a.removeLoader=w;var x=function(a,b){w(a);h.default.alert(o[0],b)};a.handleError=x});
//# sourceMappingURL=main.min.js.map
