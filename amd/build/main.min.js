function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("block_enrol_student/main",["exports","core/ajax","core/templates","jquery","core/loadingicon","core/modal_factory","block_enrol_student/handlers","core/notification","core/str"],function(a,b,c,d,f,g,h,i,j){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=a.handleError=a.removeLoader=a.addLoader=a.loadUserPagination=a.loadUserModal=a.getEnrolmentBlockData=a.populateStrings=a._sortOrder=a._courseId=a._lang=a._page=a._perPageCount=void 0;b=m(b);c=m(c);d=m(d);f=m(f);g=m(g);h=m(h);i=m(i);j=l(j);function k(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;k=function(){return a};return a}function l(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=k();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function m(a){return a&&a.__esModule?a:{default:a}}var n=25;a._perPageCount=n;var o=0;a._page=o;var p=[];a._lang=p;var q=null;a._courseId=q;a._sortOrder="ASC";var r=function(){j.get_strings([{key:"error_title",component:"block_enrol_student"},{key:"block_enrol_student_load_error",component:"block_enrol_student"}]).then(function(b){a._lang=p=b})};a.populateStrings=r;var s=function(a,e){b.default.call([{methodname:"block_enrol_student_enrol_student_data",args:{courseid:q,perpage:n,page:a,sortdir:"ASC"},done:function done(a){if(0<a.data.length){c.default.renderForPromise("block_enrol_student/table/users",{users:a.data}).then(function(b){var f=b.html,g=b.js;c.default.replaceNodeContents(".enrol-student-container>tbody",f,g);if(""!==a.pagination){(0,d.default)(".student-block-pagination").html(a.pagination)}else{(0,d.default)("student-block-pagination").html("")}w(e)}).catch(function(){return x(e,p[1])})}else{w(e)}},fail:function fail(){x(e,p[1])}}])};a.getEnrolmentBlockData=s;var t=function(a){a.preventDefault();var e=(0,d.default)(a.currentTarget),h=e.data("id");(0,d.default)(".enrol-student-container").addClass("loading");var i=f.default.addIconToContainerWithPromise((0,d.default)(".enrol-student-container"));b.default.call([{methodname:"block_enrol_student_get_student_data",args:{studentid:h},done:function done(a){g.default.create({title:"Student Information",body:c.default.render("block_enrol_student/modal/user",{user:a.data})}).then(function(a){a.show();w(i)})},fail:function fail(){x(i,p[1])}}])};a.loadUserModal=t;var u=function(b){b.preventDefault();var c=(0,d.default)(b.target).is("a")?(0,d.default)(b.target).attr("href"):(0,d.default)(b.target).closest("a").attr("href");a._page=o=h.default.getParameterByName("page",c);s(o,v())};a.loadUserPagination=u;var v=function(){(0,d.default)(".enrol-student-container").addClass("loading");return f.default.addIconToContainerWithPromise((0,d.default)(".enrol-student-container"))};a.addLoader=v;var w=function(a){(0,d.default)(".loading-icon").remove();a.resolve();(0,d.default)(".enrol-student-container").removeClass("loading")};a.removeLoader=w;var x=function(a,b){w(a);i.default.alert(p[0],b)};a.handleError=x;var y=function(b,c){a._courseId=q=b;a._perPageCount=n=c;r();s(0,v());(0,d.default)(".enrol-student-container").on("click","#user_id",function(a){return t(a)});(0,d.default)(".student-block-pagination").on("click","ul.pagination li>a",function(a){return u(a)})};a.init=y});
//# sourceMappingURL=main.min.js.map
